(this["webpackJsonppunto-venta-codigo5"]=this["webpackJsonppunto-venta-codigo5"]||[]).push([[0],{81:function(e,a,t){},82:function(e,a,t){"use strict";t.r(a);var c=t(2),s=t(1),n=t(14),r=t.n(n),i=t(17),o=t(8),d=function(){return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(c.jsxs)("a",{className:"navbar-brand",href:"#",children:[Object(c.jsx)("span",{className:"text-warning",children:"POS"})," Admin"]}),Object(c.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(c.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item active",children:Object(c.jsxs)("a",{className:"nav-link",href:"#",children:["Home ",Object(c.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link",href:"#",children:"Link"})}),Object(c.jsxs)("li",{className:"nav-item dropdown",children:[Object(c.jsx)("a",{className:"nav-link dropdown-toggle",href:"#",id:"dropdownId","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Dropdown"}),Object(c.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownId",children:[Object(c.jsx)("a",{className:"dropdown-item",href:"#",children:"Action 1"}),Object(c.jsx)("a",{className:"dropdown-item",href:"#",children:"Action 2"})]})]})]}),Object(c.jsxs)("form",{className:"form-inline my-2 my-lg-0",children:[Object(c.jsx)("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}),Object(c.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Search"})]})]})]})})},l=function(){return Object(c.jsx)("div",{children:"ADMIN DASHBOARD"})},j=t(10),b=t(11),u=t(48),m=t(12),O=t.n(m),p=t(16),h="https://codigo4-pos.herokuapp.com",x=function(){var e=Object(p.a)(O.a.mark((function e(){var a,t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/pedido"));case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(O.a.mark((function e(a){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/pedido/").concat(a));case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),f=function(e){var a=e.history,t=Object(s.useState)({columns:[{label:"Id",field:"pedido_id"},{label:"Fecha",field:"pedido_fech"},{label:"Nro",field:"pedido_nro"},{label:"Estado",field:"pedido_est"},{label:"Usuario",field:"usuario_nombre"},{label:"Mesa",field:"numero_mesa"},{label:"Platos",field:"total_platos"},{label:"Acciones",field:"acciones"}],rows:[]}),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(s.useEffect)((function(){x().then((function(e){if(e.ok){var t=e.pedidos.map((function(e){var t,s,n;return{pedido_id:e.pedido_id,pedido_fech:e.pedido_fech,pedido_nro:e.pedido_nro,pedido_est:e.pedido_est,usuario_nombre:(null===(t=e.Usuario)||void 0===t?void 0:t.usu_nom)+" "+(null===(s=e.Usuario)||void 0===s?void 0:s.usu_ape),numero_mesa:null===(n=e.Mesa)||void 0===n?void 0:n.mesa_nro,total_platos:e.PedidoPlatos.reduce((function(e,a){return e+ +a.pedidoplato_cant}),0),acciones:Object(c.jsx)("button",{className:"btn btn-dark",onClick:function(){a.push("/admin/pedidos/".concat(e.pedido_id))},children:"Ver Pedido"})}}));i(Object(j.a)(Object(j.a)({},r),{},{rows:t}))}}))}),[]),Object(c.jsxs)("main",{className:"container mt-5",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col",children:[Object(c.jsx)("h1",{className:"display-4 text-center",children:"Lista de Pedidos"}),Object(c.jsx)("hr",{})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)(u.c,{data:r})})})})})]})},v=function(e){var a,t,n,r=Object(s.useState)({}),i=Object(b.a)(r,2),o=i[0],d=i[1],l=Object(s.useState)(!0),j=Object(b.a)(l,2),u=j[0],m=j[1];return Object(s.useEffect)((function(){_(e.match.params.pedido_id).then((function(e){e.ok&&d(e.pedido),m(!1)}))}),[]),Object(c.jsx)("main",{className:"container mt-5",children:u?Object(c.jsxs)("div",{className:"alert alert-primary text-center display-4",children:["Cargando... ",Object(c.jsx)("i",{className:"fas fa-spinner fa-spin"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("h4",{children:"Informaci\xf3n del Pedido"})})}),Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Pedido Id:"})," \xa0 ",o.pedido_id]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Usuario:"})," \xa0 ",(null===(a=o.Usuario)||void 0===a?void 0:a.usu_nom)+" "+(null===(t=o.Usuario)||void 0===t?void 0:t.usu_ape)]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Estado del Pedido:"})," \xa0","pagado"===o.pedido_est?Object(c.jsx)("span",{className:"badge badge-success",children:"Pagado"}):Object(c.jsx)("span",{className:"badge badge-secondary",children:o.pedido_est})]})]}),Object(c.jsxs)("div",{className:"col-md-6 text-right",children:[Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"Fecha:"})," \xa0 ",o.pedido_fech]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"N\xfamero de mesa:"})," \xa0 ",null===(n=o.Mesa)||void 0===n?void 0:n.mesa_nro]}),Object(c.jsxs)("p",{className:"card-text",children:[Object(c.jsx)("strong",{children:"N\xfamero de pedido:"})," \xa0",Object(c.jsxs)("span",{className:"display-4",children:[" # ",o.pedido_nro]})]})]})]})})})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("div",{className:"card shadow",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("div",{className:"table-responsive",children:Object(c.jsxs)("table",{className:"table table-bordered table-hover table-striped",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"#"}),Object(c.jsx)("th",{children:"Cantidad"}),Object(c.jsx)("th",{children:"Descripci\xf3n"}),Object(c.jsx)("th",{children:"Foto"}),Object(c.jsx)("th",{children:"P. Unitario"}),Object(c.jsx)("th",{children:"P. Total"})]})}),Object(c.jsx)("tbody",{children:o.PedidoPlatos.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:a}),Object(c.jsx)("td",{children:e.pedidoplato_cant}),Object(c.jsx)("td",{children:e.Plato.plato_nom}),Object(c.jsx)("td",{children:Object(c.jsx)("img",{src:e.Plato.plato_img,alt:"",width:"120"})}),Object(c.jsxs)("td",{children:["S/ ",e.Plato.plato_pre]}),Object(c.jsxs)("td",{children:["S/ ",+e.Plato.plato_pre*+e.pedidoplato_cant]})]},e.pedidoplato_id)}))})]})})})})})})]})})},N=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d,{}),Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:"/admin/dashboard",component:l}),Object(c.jsx)(o.a,{path:"/admin/pedidos/:pedido_id",component:v}),Object(c.jsx)(o.a,{path:"/admin/pedidos",component:f})]})]})},g=Object(s.createContext)(),y=function(e,a){return"SELECCIONAR_CATEGORIA"===a.type?Object(j.a)(Object(j.a)({},e),{},{categoria_global:a.data}):"SELECCIONAR_MESA"===a.type?Object(j.a)(Object(j.a)({},e),{},{mesa_global:a.data}):"ACTUALIZAR_PEDIDOS"===a.type?Object(j.a)(Object(j.a)({},e),{},{pedidos:a.data}):"MODAL_BOLETA"===a.type?Object(j.a)(Object(j.a)({},e),{},{modal_boleta:a.data}):Object(j.a)({},e)},A=function(e){var a=e.children,t=Object(s.useReducer)(y,{categoria_global:null,mesa_global:null,pedidos:[],modal_boleta:!1}),n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(c.jsx)(g.Provider,{value:{mesa_global:r.mesa_global,categoria_global:r.categoria_global,pedidos:r.pedidos,modal_boleta:r.modal_boleta,setModalBoleta:function(e){i({type:"MODAL_BOLETA",data:e})},borrarPedido:function(){var e=r.mesa_global,a=r.pedidos;a=a.filter((function(a){return a.objMesa.mesa_id!==e.mesa_id})),i({type:"ACTUALIZAR_PEDIDOS",data:a})},restarPlatoAPedido:function(e){var a=r.pedidos,t=r.mesa_global;if(t){var c=a.find((function(e){return e.objMesa.mesa_id===t.mesa_id}));if(c){var s=c.platos.find((function(a){return a.plato_id===e.plato_id}));s&&(s.cantidad-=1,0===s.cantidad&&(c.platos=c.platos.filter((function(a){return a.plato_id!==e.plato_id})),0===c.platos.length&&(a=a.filter((function(e){return e.objMesa.mesa_id!==t.mesa_id})))),i({type:"ACTUALIZAR_PEDIDOS",data:a}))}}},seleccionarCategoriaGlobal:function(e){i({data:e,type:"SELECCIONAR_CATEGORIA"})},seleccionarMesaGlobal:function(e){i({data:e,type:"SELECCIONAR_MESA"})},incrementarPlatoAPedido:function(e){var a=r.pedidos,t=r.mesa_global;if(t){var c=a.find((function(e){return e.objMesa.mesa_id===t.mesa_id}));if(c){var s=c.platos.find((function(a){return a.plato_id===e.plato_id}));s?(s.cantidad+=1,i({type:"ACTUALIZAR_PEDIDOS",data:a})):(c.platos.push(Object(j.a)(Object(j.a)({},e),{},{cantidad:1})),i({type:"ACTUALIZAR_PEDIDOS",data:a}))}else a.push({estado:"pendiente",objMesa:Object(j.a)({},t),platos:[Object(j.a)(Object(j.a)({},e),{},{cantidad:1})]}),i({type:"ACTUALIZAR_PEDIDOS",data:a})}}},children:a})},P=function(){var e=Object(p.a)(O.a.mark((function e(){var a,t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/categoria"));case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(O.a.mark((function e(a){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/categoria/").concat(a,"/platos"));case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),w=t.p+"static/media/plato_blanco.6334c308.svg",S=function(){var e=Object(s.useState)([]),a=Object(b.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(!0),i=Object(b.a)(r,2),o=i[0],d=i[1],l=Object(s.useContext)(g),j=l.seleccionarCategoriaGlobal,u=l.categoria_global;return Object(s.useEffect)((function(){P().then((function(e){e.ok&&(n(e.content),d(!1))}))}),[]),Object(c.jsx)("nav",{className:"menu",children:Object(c.jsx)("ul",{className:"menu__lista",children:o?Object(c.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}):t.map((function(e){return Object(c.jsxs)("li",{style:{textAlign:"center"},className:e.categoria_id===(null===u||void 0===u?void 0:u.categoria_id)?"active":"",onClick:function(){j(e)},children:[Object(c.jsx)("img",{src:w,alt:""}),Object(c.jsx)("span",{children:e.categoria_nom})]},e.categoria_id)}))})})},I=function(e){var a=e.objPlato;return Object(c.jsxs)("li",{className:"comanda__item",children:[Object(c.jsxs)("p",{className:"comanda__nombre",children:[Object(c.jsx)("span",{children:Object(c.jsx)("strong",{children:a.plato_nom})}),Object(c.jsxs)("span",{children:["Precio: S/ ",a.plato_pre]})]}),Object(c.jsx)("p",{className:"comanda__cantidad",children:a.cantidad}),Object(c.jsx)("p",{className:"comanda__precio",children:Object(c.jsxs)("strong",{children:["S/ ",+a.cantidad*+a.plato_pre]})})]})},E=(t(46),t(90),t(32),t(89)),k=function(){var e=Object(s.useContext)(g),a=e.modal_boleta,t=e.setModalBoleta;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(E.a,{show:a,onHide:function(){t(!1)},children:[Object(c.jsx)(E.a.Header,{closeButton:!0,children:Object(c.jsx)(E.a.Title,{children:"Modal heading"})}),Object(c.jsx)(E.a.Body,{children:"aqui ir\xe1 plantilla"}),Object(c.jsxs)(E.a.Footer,{children:[Object(c.jsx)("button",{className:"btn btn-secondary",children:"Imprimir"}),Object(c.jsx)("button",{className:"btn btn-danger",children:"Cerrar"})]})]})})},M=function(){var e=Object(s.useContext)(g),a=e.pedidos,t=e.mesa_global,n=(e.borrarPedido,e.modal_boleta,e.setModalBoleta),r=null;t&&(r=a.find((function(e){return e.objMesa.mesa_id===t.mesa_id})));return Object(c.jsxs)("div",{className:"comanda",children:[Object(c.jsx)("h4",{className:"comanda__mesa",children:t?"Mesa ".concat(t.mesa_nro):"Sin mesa seleccionada"}),Object(c.jsx)("p",{className:"comanda__usuario",children:"Carlos Jimenez"}),Object(c.jsx)("hr",{}),t?r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("ul",{className:"comanda__lista",children:r.platos.map((function(e){return Object(c.jsx)(I,{objPlato:e},e.plato_id)}))}),Object(c.jsx)("button",{className:"boton boton-success boton-block",onClick:function(){n(!0)},children:"PAGAR"})]}):Object(c.jsxs)("div",{children:["No hay pedidos en la mesa ",t.mesa_nro," \ud83d\ude25"]}):Object(c.jsx)("div",{children:"Seleccione una mesa"}),Object(c.jsx)(k,{})]})},D=t.p+"static/media/logo.a9757059.svg",L=t.p+"static/media/search.c031f9ef.svg",R=function(){return Object(c.jsxs)("header",{className:"header",children:[Object(c.jsx)("div",{className:"header__logo",children:Object(c.jsx)("img",{src:D,alt:""})}),Object(c.jsxs)("div",{className:"header__buscador",children:[Object(c.jsx)("img",{src:L,alt:""}),Object(c.jsx)("input",{type:"text",className:"header__input",placeholder:"Busca un t\xe9rmino"})]}),Object(c.jsxs)("div",{className:"header__usuario",children:[Object(c.jsx)("img",{src:"https://randomuser.me/api/portraits/men/90.jpg",alt:""}),Object(c.jsx)("span",{children:"Jorge Garnica"})]})]})},T=function(){var e=Object(p.a)(O.a.mark((function e(){var a,t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/mesa"));case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.useState)([]),a=Object(b.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(!0),i=Object(b.a)(r,2),o=i[0],d=i[1],l=Object(s.useContext)(g),j=l.seleccionarMesaGlobal,u=l.mesa_global;return Object(s.useEffect)((function(){T().then((function(e){e.ok&&n(e.content),d(!1)}))}),[]),Object(c.jsxs)("div",{className:"mesas",children:[Object(c.jsx)("ul",{className:"mesas__lista",children:o?Object(c.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})}):t.map((function(e){return Object(c.jsxs)("li",{className:e.mesa_id===(null===u||void 0===u?void 0:u.mesa_id)?"mesas__mesa activo":"",onClick:function(){j(e)},children:[Object(c.jsx)("span",{className:"mesas__titulo",children:"Mesa"}),Object(c.jsx)("span",{className:"mesas__numero",children:e.mesa_nro})]},e.mesa_id)}))}),Object(c.jsx)("div",{className:"mesas__info"})]})},B=function(e){var a=e.objPlato,t=Object(s.useContext)(g),n=t.incrementarPlatoAPedido,r=t.restarPlatoAPedido;return Object(c.jsxs)("div",{className:"carta__plato",children:[Object(c.jsx)("img",{src:a.plato_img,alt:""}),Object(c.jsx)("h4",{className:"carta__titulo",children:a.plato_nom}),Object(c.jsxs)("span",{className:"carta__precio",children:["S/ ",a.plato_pre]}),Object(c.jsxs)("div",{className:"carta__botones",children:[Object(c.jsx)("button",{className:"boton boton-outline-primary boton-restar",onClick:function(){r(a)},children:"-1"}),Object(c.jsx)("button",{className:"boton boton-outline-primary boton-sumar",onClick:function(){n(a)},children:"+1"})]})]})},F=function(){var e=Object(s.useState)([]),a=Object(b.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(!0),i=Object(b.a)(r,2),o=i[0],d=i[1],l=Object(s.useContext)(g).categoria_global;return Object(s.useEffect)((function(){d(!0),l&&C(l.categoria_id).then((function(e){e.ok&&(n(e.content.Platos),d(!1))}))}),[l]),Object(c.jsx)("div",{className:"carta__platos",children:l?o?Object(c.jsx)("div",{className:"text-light",children:"Cargando"}):t.map((function(e){return Object(c.jsx)(B,{objPlato:e},e.plato_id)})):Object(c.jsx)("h4",{className:"text-light",children:"Ninguna categor\xeda ha sido seleccionada"})})},G=function(){var e=Object(s.useContext)(g),a=e.categoria_global,t=e.mesa_global;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(R,{}),Object(c.jsxs)("main",{className:"pos-container",children:[Object(c.jsx)(S,{}),Object(c.jsxs)("section",{className:"tabla",children:[Object(c.jsx)(U,{}),Object(c.jsxs)("div",{className:"pedido",children:[Object(c.jsxs)("div",{className:"carta",children:[Object(c.jsxs)("h3",{children:["Lista de Platos Categoria: \xa0",Object(c.jsx)("span",{className:"color-secundario",children:(null===a||void 0===a?void 0:a.categoria_nom)||"Seleccione"})]}),Object(c.jsx)(F,{})]}),Object(c.jsxs)("div",{className:"boleta",children:[Object(c.jsxs)("h3",{children:["Pedido Mesa: \xa0",Object(c.jsx)("span",{className:"color-secundario",children:(null===t||void 0===t?void 0:t.mesa_nro)||"Seleccione"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)(M,{})]})]})]})]})]})},Z=function(){return Object(c.jsx)(A,{children:Object(c.jsx)(o.c,{children:Object(c.jsx)(o.a,{path:"/pos/pedido",component:G})})})},H=function(){return Object(c.jsx)(i.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{path:"/pos",component:Z}),Object(c.jsx)(o.a,{path:"/admin",component:N})]})})};t(80),t(81);r.a.render(Object(c.jsx)(H,{}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.477153a5.chunk.js.map